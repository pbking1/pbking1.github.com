
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux Server Tutorial - KING</title>
  <meta name="author" content="pb">

  
  <meta name="description" content="1.GNU plan GNU plan is founded by the Richard M.Stallman and free software foundation
In order to make sure the GNU software can be used freely
All &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pbking1.github.com/blog/2014/04/15/linux-server-tutorial">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="KING" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">KING</a></h1>
  
    <h2>Do more, say less</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:pbking1.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/project">Project</a></li>
  <li><a href="/about">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Linux Server Tutorial</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-15T14:47:08+08:00" pubdate data-updated="true">Apr 15<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><h3>1.GNU plan</h3>

<ul>
<li>GNU plan is founded by the Richard M.Stallman and free software foundation</li>
<li>In order to make sure the GNU software can be used freely</li>
<li>All the GNU softwares have a license called &ldquo;GNU General Public License&rdquo;, <code>GPL</code></li>
<li>this forbid the other from adding any constrict to the GNU software and let all the people to have the right to use it.</li>
</ul>


<h3>2.POSIX standard</h3>

<ul>
<li>Portable Operating system Interface for Computing Systems</li>
<li>used to solve the problem that the UNIX system have lots of versions and result in a chaos</li>
<li>the standard is developed by the IEEE and standarded by the ANSI and ISO</li>
</ul>


<!--more-->


<h3>3.Linux component</h3>

<ul>
<li>Linux kernal

<ul>
<li>is opensource because of the GPL</li>
</ul>
</li>
<li>Linux Shell

<ul>
<li>is the UI</li>
<li>have KDE (King Destop Environment) and GROME (GNU Network Object Model Environment)</li>
<li>BASH

<ul>
<li>GNU&rsquo;s Bourne Again Shell</li>
</ul>
</li>
</ul>
</li>
<li>Linux Filesystem

<ul>
<li>multi tree structure</li>
</ul>
</li>
</ul>


<h3>4.How linux work</h3>

<h4>start up</h4>

<ul>
<li>After the user open the power

<ul>
<li>BIOS first add electivity to check itself and initialize the system and start up the service</li>
<li>then start up the mingetty process</li>
</ul>
</li>
<li>then the shell user log in and start up the device in the sequence setting in the BIOS</li>
<li>then start up the GRUB or LILO to get the access of the computer</li>
<li>after that start up the linux kernel with its configuration</li>
<li>then use the init program list</li>
<li>after the user log in successfully, they can enter the system</li>
</ul>


<h3>5.FTP server</h3>

<pre><code>the ftp is depend on the C/S model
is used for tranfering the data between client and server
</code></pre>

<ul>
<li>First the client send the connection request to the server

<ul>
<li>and the client will dynamically open a port > 1024 to wait for the connction of the server</li>
</ul>
</li>
<li>After the server listened the request in the port 21

<ul>
<li>it will found a ftp connection between client and server</li>
</ul>
</li>
<li>When need to transfer the data, the client will open a port > 1024 to connect to the pot 20 of the server and transfer the data through the port</li>
<li>After transferign the data, the port will be released</li>
</ul>


<h4>ftp software</h4>

<ul>
<li>we can use <code>vsFTPd</code> in linux</li>
<li>how to setup the ftp server?

<ul>
<li>first <code>sudo apt-get install vsftpd</code></li>
<li>and use <code>sudo /etc/init.d/vsftpd start</code> to start the service

<ul>
<li>use <code>sudo /etc/init.d/vsftpd restart</code> to restart the service</li>
<li>use <code>sudo /etc/init.d/vsftpd stop</code> to stop the service</li>
</ul>
</li>
<li>configure the ftp

<ul>
<li>use <code>sudo vi /etc/vsftpd.conf</code> to edit the configuration file</li>
<li>then use <code>sudo /etc/init.d/vsftpd restart</code> to restart the service and apply the change</li>
</ul>
</li>
<li>also should we backup the file usesudo <code>cp /etc/vsftpd.conf /etc/vsftpd.conf_back</code></li>
<li>and do not contain empty line after each sentance
&#8220;`
listen=YES             #启用独立vsftpd服务器

<h1>listen_ipv6=YES       不需要，注释掉</h1>

anonymous_enable=YES   #本服务器需要匿名访问
local_enable=YES       #要用虚拟用户，需要本地访问的（关于本地用户和虚拟用户不要迷茫，稍后解释）
write_enable=YES       #需要本地用户对文件进行修改和删除

<h1>local_umask=022     FTP上传文件权限 ，默认是077，本服务器每个虚拟用户都有上传权限设置，总的就留空注释掉了</h1>

<h1>anon_upload_enable=YES 是否允许匿名用户上传，不需要匿名上传注释掉</h1>

<h1>anon_mkdir_write_enable=YES 是否允许匿名用户的写和创建目录的权限，不要匿名管理，注释掉</h1>

dirmessage_enable=YES   当切换目录时，是否显示该目录下message隐藏文件的内容，这个用来显示登录信息的 设为YES
message_file=Welcome     显示的欢迎信息，在ftp目录下建Welcome的文件，里面写上登录信息即可，一般人常用.message隐藏文件
xferlog_enable=YES 是否激活上传和下载的日志，需要
connect_from_port_20=YES 是否启动FTP数据端口20的连接请求  需要
chown_uploads=YES 是否改变上传文件的所有者，我这里需要改变上传文件所有者
chown_username=virtual 改变上传文件的所有着为virtual，这个virtual用户一会要新建的，用来实现虚拟用户登录
xferlog日志格式ferlog_file=/var/log/vsftpd.log 上传/下载日志文件所默认的路径
xferlog_std_format=YES 是否使用标准的ftpd xferlog日志格式
idle_session_timeout=600 是否将在用户会话空闲10分钟后被中断
data_connection_timeout=120 是否将在数据连接空闲2分钟后被中断

<h1>nopriv_user=ftpsecure 是否运行vsftpd需要的非特殊系统用户默认nobody  不需要</h1>

<h1>async_abor_enable=YES 是否是否允许运行特殊的FTP命令async   不要</h1>

ascii_upload_enable=YES 是否启用上传的ascii传输方式   需要
ascii_download_enable=YES 是否启用下载的ascii传输方式   需要
ftpd_banner=Welcome to blah FTP service. 用户连接服务器后显示信息，显示信息可以随便写

<h1>deny_email_enable=YES 是否允许某些匿名用户使用邮件地址（默认的）</h1>

max_clients=10 #FTP服务器最大承载用户,本人设为10
max_per_ip=5 #限制每个IP的进程
local_max_rate=256000 #最大传输速率(b/s)

<h1>hide_ids=YES #是否隐藏文件的所有者和组信息，不隐藏</h1>

<p>idle_session_timeout= 3000  #空闲（发呆）用户会话的超时时间，若是超出这时间没有数据的传送或是指令的输入，则会强迫断线。单位为秒，默认值为300。</p></li>
</ul>


<p>  下面是用来虚拟用户登录的
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  guest_enable=YES             使用虚拟用户
  guest_username=virtual       将虚拟用户等同本地用户 virtual
  user_config_dir=/etc/vsftpd/vsftpd_user_conf   虚拟用户配置文件夹
  pam_service_name=vsftpd.vu    虚拟用户加密设置
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  &#8220;`</p>

<ul>
<li>then use <code>sudo mkdir /home/vsftpd</code> and <code>cd /home/vsftpd</code></li>
<li>then use <code>sudo mkdir down upload wsn</code></li>
<li>after that setup the virtual user database

<ul>
<li>use <code>sudo vi /home/loguser.txt</code></li>
<li>and the content is
<code>
down
password1
upload
password2
wsn
password3
</code></li>
</ul>
</li>
<li>use <code>sudo apt-get install db4.7-util</code></li>
<li>Then create a new dir and put the configuration in it.</li>
<li>use <code>sudo mkdir /etc/vsftpd</code></li>
<li>use <code>sudo db4.7_load -T -t hash -f /home/loguser.txt /etc/vsftpd/vsftpd_login.db</code></li>
<li>set the access of the databases file eventually</li>
<li>use <code>sudo chmod 600 /etc/vsftpd/vsftpd_login.db</code></li>
<li>configure the PAM file <code>/etc/pam.d/vsftpd.vu</code></li>
<li>use <code>sudo vi /etc/pam.d/vsftpd.vu</code> with the content
<code>
auth required /lib/security/pam_userdb.so db=/etc/vsftpd_login
account required /lib/security/pam_userdb.so db=/etc/vsftpd_login
</code></li>
<li>PAM is used to verify the virtual user

<ul>
<li>and this is activated by the command <code>pam_service_name</code></li>
</ul>
</li>
<li>Setup the local user for the virtual user

<ul>
<li>setup  a system user called <code>vsftpd</code> and the home dir is <code>/home/vsftpd</code> and the user login terminal set to /bin/false
<code>
sudo useradd virtual -d /home/vsftpd -s /bin/false
sudp chown virtual:virtual /home/vsftpd
</code></li>
<li>and until now the three users can work now</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>6.mail server</h3>

<pre><code>mail is used to communicate on the internet 
</code></pre>

<ul>
<li>component

<ul>
<li>MUA

<ul>
<li>Mail User Agent</li>
<li>used to help the user to send and get the email</li>
</ul>
</li>
<li>MTA

<ul>
<li>Mail Transfer Agent</li>
<li>used to monitor and send the email</li>
</ul>
</li>
<li>mail protocol

<ul>
<li>SMTP

<ul>
<li>simple mail transfer protocol</li>
<li>use port 25</li>
<li>is a request/respond protocol</li>
<li>and be used to setup the SMTP connection between with the remote server

<ul>
<li>can transfer the mail from client to server

<ul>
<li>or server to server</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>POP3

<ul>
<li>Post office protocol</li>
<li>use TCP 110 port</li>
<li>used to receive the mail</li>
<li>e.g

<ul>
<li>the client connect with the POP3 server using TCP connection</li>
<li>and the POP3 protocol will affirm the usernamd and userpassword</li>
<li>after that the client can receive or delete the mail</li>
</ul>
</li>
</ul>
</li>
<li>IMAP

<ul>
<li>Internet Message Access Protocol</li>
<li>can be used as POP3 to receive the mail</li>
<li>can be read offline</li>
<li>can preview the mail</li>
</ul>
</li>
<li>Web Mail

<ul>
<li>is not a protocol but a plugin</li>
<li>use the browser to receive, send and read the mail</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>7.APT&mdash;&mdash;-software package managemnt</h3>

<ul>
<li>use <code>/etc/apt/sources.list</code> to store the software package list

<ul>
<li>which is called the <em>repository</em></li>
</ul>
</li>
<li>this is widely used in the Debain linux like ubuntu</li>
<li>if the client want to update the software

<ul>
<li>They will download the dependency file of the softeware and compare with the system file, download all the needed dependencies.</li>
</ul>
</li>
<li>some useful command</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apt-get : used to manage the software 
</span><span class='line'>apt-cache : used to check the info of the software
</span><span class='line'>apt-proxy : use to construct the proxy server of APT
</span><span class='line'>apt-show-versions : used to show the version of the software in the system
</span><span class='line'>apt-config : use the read the apt coniguration info </span></code></pre></td></tr></table></div></figure>


<h3>8.linux user and process management</h3>

<h4>user management</h4>

<ul>
<li>linux have three kinds of users

<ul>
<li>root</li>
<li>ordinary</li>
<li>virtual

<ul>
<li>like bin, damon, ftp, adm</li>
</ul>
</li>
</ul>
</li>
<li>each used have a UID(user id)</li>
<li><code>/etc/passwd</code>

<ul>
<li>used to store the infomation of the users</li>
</ul>
</li>
<li><code>/etc/shadow</code>

<ul>
<li>used to store the info that passwd file can not store

<ul>
<li>like some info about the password</li>
</ul>
</li>
</ul>
</li>
<li>and it is similar with the <code>/etc/group</code> and <code>/etc/gshadow</code></li>
</ul>


<h5>use the command to manage</h5>

<ul>
<li><p><code>whoami</code></p>

<ul>
<li>see the name of the current login user</li>
</ul>
</li>
<li><p><code>who</code></p>

<ul>
<li>check the current login user</li>
</ul>
</li>
<li><code>w</code>

<ul>
<li>check the detail info the current login user</li>
</ul>
</li>
<li><code>id</code>

<ul>
<li>check the UID, GID and so on infomation of particular user</li>
</ul>
</li>
<li><code>finger</code>

<ul>
<li>use to see the infomation of particular user</li>
</ul>
</li>
<li><code>su</code>

<ul>
<li>change the login user</li>
</ul>
</li>
<li><code>write</code>

<ul>
<li>send message to the particular user</li>
</ul>
</li>
<li><code>wall</code>

<ul>
<li>broadcast the infomation to all user</li>
</ul>
</li>
<li><code>sudo -s</code>

<ul>
<li>get the root access</li>
</ul>
</li>
<li><code>useradd</code> / <code>adduser</code>

<ul>
<li>add user</li>
</ul>
</li>
<li><code>passwd</code>

<ul>
<li>change the password of a user</li>
</ul>
</li>
<li><code>chsh</code>

<ul>
<li>change the shell the user is using</li>
</ul>
</li>
<li><code>usermod</code>

<ul>
<li>change the info of the user account</li>
</ul>
</li>
<li><code>userdel</code>

<ul>
<li>delete the user</li>
</ul>
</li>
<li><code>startx</code>

<ul>
<li>start the xwindows(GUI)</li>
</ul>
</li>
</ul>


<h4>process management</h4>

<h5>some useful command</h5>

<ul>
<li><code>ps</code>

<ul>
<li>see what process is running</li>
<li>e.g <code>ps aux | more</code>

<ul>
<li><code>ps aux | grep httpd</code></li>
</ul>
</li>
</ul>
</li>
<li><code>| more</code>

<ul>
<li>to see the long content in several pages</li>
</ul>
</li>
<li><code>kill</code>

<ul>
<li>kill the process</li>
<li>or <code>killall</code></li>
<li><code>kill -9</code> to kill the zombie process</li>
<li><code>pkill name</code> to kill the process that know its name</li>
</ul>
</li>
<li>top

<ul>
<li>to see the process dynamically</li>
</ul>
</li>
<li><code>&amp;</code>

<ul>
<li>let the command work in the background</li>
<li>e.g <code>make install &amp;</code></li>
</ul>
</li>
<li><code>Ctrl + Z</code>

<ul>
<li>put the process in the background and pause it</li>
</ul>
</li>
<li><code>jobs</code>

<ul>
<li>to see what process is in the background</li>
</ul>
</li>
<li><code>fg</code>

<ul>
<li>get the background process back</li>
</ul>
</li>
<li><code>bg</code>

<ul>
<li>run the backgrounf process in the background</li>
</ul>
</li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">pb</span></span>

      








  


<time datetime="2014-04-15T14:47:08+08:00" pubdate data-updated="true">Apr 15<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>Linux</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
  <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=1393934169073983" charset="utf-8"></script>
<!-- JiaThis Button END -->
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/04/13/my-bash-profile-configuration/" title="Previous Post: my bash profile configuration">&laquo; my bash profile configuration</a>
      
      
    </p>
  </footer>

</article>



  
  <section>  
    <h1>Comments</h1>  
    <div id="comments" aria-live="polite"><!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="请将此处替换成文章在你的站点中的ID" data-title="请替换成文章的标题" data-url="请替换成文章的网址"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"pbking1"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end --></div>  
  </section>  


</div>

<aside class="sidebar">
  
    <section> 
  <h1>Categories</h1> 
  <ul id="categories"> 
    <li class='category'><a href='/blog/categories/algorithm/'>Algorithm (3)</a></li>
<li class='category'><a href='/blog/categories/android/'>Android (1)</a></li>
<li class='category'><a href='/blog/categories/linux/'>Linux (2)</a></li>
<li class='category'><a href='/blog/categories/osx/'>OSX (1)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>Octopress (1)</a></li>
<li class='category'><a href='/blog/categories/robot/'>Robot (2)</a></li>
 
  </ul> 
</section><section>
<ul class="ds-recent-comments" data-num-items="10">
</ul>
<!--多说js加载开始，一个页面只需要加载一次 -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"pbking1.duoshuo.com"};
(function() {
var ds = document.createElement('script');
ds.type = 'text/javascript';
ds.async = true;ds.src = 'http://static.duoshuo.com/embed.js';
ds.charset = 'UTF-8';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
<!--多说js加载结束，一个页面只需要加载一次 -->
</section>
<section>
  <h1>visitor map</h1>
  <!--获得代码添加到这-->
  <script type="text/javascript" src="http://jj.revolvermaps.com/2/1.js?i=9p2gbjn49gr&amp;s=220&amp;m=7&amp;v=true&amp;r=false&amp;b=000000&amp;n=false&amp;c=ff0000" async="async"></script>
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - pb -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
